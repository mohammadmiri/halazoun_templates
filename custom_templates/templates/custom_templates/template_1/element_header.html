<div class="header">
    <div class="row wrapper">
        <div class="brand-name col-md-2 d-flex justify-content-center align-items-center p-3">{{ brand }}</div>
        <div class="col-md-8 p-3">
            <form id="search-form" action="search" method="get">
                <div class="input-wrapper">
                    <input name="query" placeholder="جست و جو" class="form-control text-font">
                </div>
                <div class="search-button-wrapper d-flex justify-content-center bg-info hover-pointer">
                    <button type="submit" class="button-background-hidden hover-pointer">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </form>
        </div>
        <div class="col-md-2 d-flex justify-content-start align-items-center p-3">
            <div class="border-thin border-green p-2 hover-pointer rounded fg-green">
                <span class="h5 text-center"><i class="fas fa-shopping-basket"></i></span>
                <span class="h6 text-center mr-3">سبد خرید</span>
            </div>
        </div>
    </div>
</div>

<style>
    .brand-name{
        font-size: {{ brand_name_size }}px;
    }
    .button-background-hidden{
        background: transparent;
        padding: 0;
        border: 0;
    }
    .input-wrapper{
        display: inline-block;
        width: 90%;
    }
    .input-wrapper input{
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
    }
    .search-button-wrapper{
        display: inline-block;
        width: 10%;
        float: left;
        padding: 4px;
        border-top-left-radius: 4px;
        border-bottom-left-radius: 4px;
    }
    .search-button-wrapper button{
        font-size: 20px;
        color: white;
    }
    .search-button-wrapper button:focus{
        border: none;
        outline:none;
    }
    .fg-green{
        color: #1abc9c;
    }
    .border-thin{
        border: 1px solid;
    }
    .border-green{
        border-color: #1abc9c;
    }
</style>

<script>
    $(document).ready(function(){
        let pre_sharp = window.location.href.split('#')[0];
        $('a').each(function(){
                $(this).attr('href', pre_sharp + $(this).attr('data-url'));
            }
        );

        function redirect_to_search_page(){
            let search_query = $('#search-form #search-query').value;
            let pre_sharp = window.location.href.split('#')[0];
            window.location.replace(pre_sharp + '#/search?query=' + search_query);
        }
        $('#search-form #search-button').click(redirect_to_search_page);
        $('#search-form #search-query').keyup(function(event){
            if(event.key === 'Enter'){
                    redirect_to_search_page();
                }
            }
        );
    });
</script>

